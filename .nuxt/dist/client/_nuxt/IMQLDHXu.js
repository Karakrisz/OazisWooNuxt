import{d as C,N as M,Z as D,I as x,b as g,o as i,c as y,t as N,f as w,D as O,F as V,r as A,a as f,Y as E,_ as L,O as T,K as U,U as H,w as q,e as F,g as j,$ as K,j as Q}from"./CVb3yudB.js";import{_ as W}from"./CaQzSeT8.js";const Y={key:0,class:"red-badge"},Z=C({__name:"SaleBadge",props:{node:{type:Object,required:!0}},setup(e){const{t:c}=M(),{node:t}=e,{storeSettings:a}=D(),u=x(()=>{if(!(t!=null&&t.rawSalePrice)||!(t!=null&&t.rawRegularPrice))return"";const p=parseFloat(t==null?void 0:t.rawSalePrice),m=parseFloat(t==null?void 0:t.rawRegularPrice);return Math.round((p-m)/m*100)+" %"}),h=x(()=>t.rawSalePrice&&a.saleBadge!=="hidden"),d=x(()=>(a==null?void 0:a.saleBadge)==="percent"?u.value:c("messages.shop.onSale")?c("messages.shop.onSale"):"Sale");return(p,m)=>g(h)?(i(),y("span",Y,N(g(d)),1)):w("",!0)}}),G=O(Z,[["__scopeId","data-v-395a4e44"]]),J={class:"inline-flex items-center"},X={key:0,class:"text-xs ml-1 text-gray-500"},ee=C({__name:"StarRating",props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup(e){return(c,t)=>{const a=L;return i(),y("div",J,[(i(),y(V,null,A(5,u=>f(a,{key:u,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:E({color:e.rating<u?"#ccc":"#FBBE24"})},null,8,["size","style"])),64)),e.count!==null&&!e.hideCount?(i(),y("span",X,"("+N(e.count)+")",1)):w("",!0)])}}}),te={class:"relative product-card"},ae={class:"p-2"},ne={class:"mb-2 font-light leading-tight"},P=220,re=C({__name:"ProductCard",props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var k,R,z,I;const c=T(),{storeSettings:t}=D(),a=e,u=Math.round(P*1.125),h=U((k=c.query)==null?void 0:k.filter),d=U(((I=(z=(R=h.value)==null?void 0:R.split("pa_color[")[1])==null?void 0:z.split("]")[0])==null?void 0:I.split(","))||[]);H(()=>c.query,()=>{var s,o,n;h.value=c.query.filter,d.value=((n=(o=(s=h.value)==null?void 0:s.split("pa_color[")[1])==null?void 0:o.split("]")[0])==null?void 0:n.split(","))||[]});const p=x(()=>{var s,o,n,l;return((o=(s=a.node)==null?void 0:s.image)==null?void 0:o.producCardSourceUrl)||((l=(n=a.node)==null?void 0:n.image)==null?void 0:l.sourceUrl)||"/images/placeholder.jpg"}),m=x(()=>{var s,o,n,l;if(d.value.length){const r=(o=(s=a.node)==null?void 0:s.variations)==null?void 0:o.nodes.filter(v=>{var _;const $=(_=v.attributes)==null?void 0:_.nodes.some(B=>d.value.some(b=>B.value.includes(b))),S=d.value.some(B=>{var b;return(b=v.slug)==null?void 0:b.includes(B)});return $||S});if(r!=null&&r.length)return((n=r[0].image)==null?void 0:n.producCardSourceUrl)||((l=r[0].image)==null?void 0:l.sourceUrl)||p.value}return p.value});return(s,o)=>{const n=G,l=K,r=Q,v=ee,$=W;return i(),y("div",te,[f(r,{to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:q(()=>{var S,_;return[f(n,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),g(m)?(i(),F(l,{key:0,width:P,height:g(u),src:g(m),alt:((S=e.node.image)==null?void 0:S.altText)||e.node.name||"Product image",title:((_=e.node.image)==null?void 0:_.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:`${P/2}px md:${P}px`,placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading","sizes"])):w("",!0)]}),_:1},8,["to","title"]),j("div",ae,[g(t).showReviews?(i(),F(v,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):w("",!0),f(r,{to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:q(()=>[j("h2",ne,N(e.node.name),1)]),_:1},8,["to","title"]),f($,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,8,["sale-price","regular-price"])])])}}});export{G as _,ee as a,re as b};
